<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>

        <record id="patient_res_partner_tree" model="ir.ui.view">
            <field name="name">patient.res.partner.tree</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <tree string="Patient">
                    <field name="file_number"/>
                    <field name="name"/>
                    <field name="mobile"/>
                    <field name="birth_date"/>
                    <field name="age_years"/>
                    <!--<button name="check_in" type="object" class="pull-right" string="Check In" icon="fa-map-marker"/>-->
                    <button name="open_consultation" type="object" class="pull-right" string="Consultation"
                            icon="fa-contao"/>
                    <!--<button name="open_calender" type="object" class="pull-right" string="Book an appointment"-->
                    <!--icon="fa-calendar"/>-->
                </tree>
            </field>
        </record>

        <record id="patient_res_partner_kanban" model="ir.ui.view">
            <field name="name">patient.res.partner.kanban</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <kanban class="o_event_kanban_view">
                    <field name="id"/>
                    <field name="name"/>
                    <field name="file_number"/>
                    <field name="mobile"/>
                    <field name="birth_date"/>
                    <field name="age_years"/>
                    <field name="active"/>
                    <field name="image_medium"/>
                    <!--<field name="paid_amt"/>-->
                    <!--<field name="total_amount"/>-->
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                <div class="o_event_left">
                                    <div class="o_kanban_image">
                                        <div class="reservation_main_guest_image"
                                             t-attf-style="background-image:url('#{kanban_image('res.partner', 'image_medium', record.id.raw_value)}') "/>
                                    </div>
                                    <!--<hr>-->
                                    <!--<seperator/>-->
                                    <!--</hr>-->
                                    <!--<div class="o_day">-->
                                    <!--<field name="file_number"/>-->
                                    <!--</div>-->
                                </div>


                                <div class="o_event_right">
                                    <div class="o_th_kanban_right_top">
                                        <div class="o_kanban_record_headings mt4 reservation_heading">

                                            <div style="float:left;">
                                                <ul style="font-size: 14px;">
                                                    <li class="mb4" style="font-size:20px;">
                                                        <strong>
                                                            <field name="name"/>
                                                        </strong>
                                                    </li>
                                                    <li class="mb4">
                                                        File Number :
                                                        <strong>
                                                            <field name="file_number"/>
                                                        </strong>
                                                    </li>
                                                    <li class="mb4">
                                                        Mobile :
                                                        <strong>
                                                            <field name="mobile"/>
                                                        </strong>
                                                    </li>
                                                    <li class="mb4">
                                                        Birth Date :
                                                        <strong>
                                                            <field name="birth_date"/>
                                                        </strong>
                                                    </li>
                                                    <li class="mb4">
                                                        Age :
                                                        <strong>
                                                            <field name="age_years"/>
                                                        </strong>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="flex-container" style="float: right">
                                                <!--<a class="items" name="check_in" type="object"-->
                                                <!--style="padding-right: 20px;">-->
                                                <!--<font style="font-size: 18px;">-->
                                                <!--<i class="fa fa-map-marker" aria-label="Check In"-->
                                                <!--title="Check In" role="img"/>-->
                                                <!--</font>-->
                                                <!--</a>-->

                                                <a class="items" name="open_consultation" type="object"
                                                   style="padding-right: 20px;">
                                                    <font style="font-size: 18px;">
                                                        <i class="fa fa-contao" aria-label="Consultation"
                                                           title="Consultation" role="img"/>
                                                    </font>
                                                </a>

                                                <!--<a class="items" name="open_calender" type="object"-->
                                                <!--style="padding-right: 20px;">-->
                                                <!--<font style="font-size: 18px;">-->
                                                <!--<i class="fa fa-calendar" aria-label="Book an appointment"-->
                                                <!--title="Book an appointment" role="img"/>-->
                                                <!--</font>-->
                                                <!--</a>-->
                                                <!--<a class="items" name="print_patient_detail" type="object"-->
                                                <!--style="padding-right: 20px;">-->
                                                <!--<font style="font-size: 18px;">-->
                                                <!--<i class="fa fa-print" aria-label="Print"-->
                                                <!--title="Print Patient Details" role="img"/>-->
                                                <!--</font>-->
                                                <!--</a>-->
                                            </div>
                                        </div>
                                    </div>
                                    <!--<div class='o_kanban_primary_bottom bottom_block reservation-progressbar'>-->
                                    <!--<field name="progress" widget="progressbar" title="Paid $"-->
                                    <!--options="{'current_value': 'progressbar'}"/>-->
                                    <!--                                            <a class="items" name="show_payment_receipts" context="{'partner_id': active_id}" type="object" >-->
                                    <!--<div class="reservation-total-paid">-->
                                    <!--<field name="paid_amt"/>-->
                                    <!--/-->
                                    <!--<field name="total_amount"/>-->
                                    <!--</div>-->
                                    <!--                                            </a>-->
                                    <!--</div>-->
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>


        <record id="patient_res_partner_form" model="ir.ui.view">
            <field name="name">patient.res.partner.form</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <form string="Patient">
                    <sheet>
                        <field name="image" widget='image' class="oe_avatar"
                               options='{"preview_image": "image_medium"}'/>
                        <group>
                            <group>
                                <!--<field name="first_name" required="1"/>-->
                                <!--<field name="last_name" required="1"/>-->
                                <field name="name"/>
                                <field name="birth_date" placeholder="e.g. Month/Date/Years"/>
                                <field name="age_years" context="{'insert_data':1}"/>
                                <field name="gender" widget="radio"/>
                                <label for="street" string="Address"/>
                                <div class="o_address_format">
                                    <field name="street" placeholder="Street..." class="o_address_street"/>
                                    <field name="street2" placeholder="Street 2..." class="o_address_street"/>
                                    <field name="city" placeholder="City" class="o_address_city"/>
                                    <field name="state_id" class="o_address_state" placeholder="State"
                                           options="{&quot;no_open&quot;: True}"
                                           context="{'country_id': country_id, 'zip': zip}"/>
                                    <field name="zip" placeholder="ZIP" class="o_address_zip"/>
                                    <field name="country_id" placeholder="Country" class="o_address_country"
                                           options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                                </div>


                            </group>
                            <group>
                                <!--<field name="mobile"/>-->
                                <!--<field name="phone"/>-->
                                <field name="patient_mobile_ids">
                                    <tree editable="bottom">
                                        <field name="name"/>
                                        <field name="mobile"/>
                                    </tree>
                                </field>
                                <field name="email"/>
                                <!--<field name="operating_unit_ids" widget="many2many_tags"/>-->
                                <label for="file_number"/>
                                <div class="oe_inline">
                                    <field name="file_number" nolabel="1"/>
                                    <span attrs="{'invisible': ['|', ('file_number', '!=', False), ('prev_file_number', '=', False)]}">
                                        Previous File Number is
                                    </span>
                                    <field name="prev_file_number" class="oe_inline" readonly="1" nolabel="1"
                                           attrs="{'invisible': [('file_number', '!=', False)]}"/>
                                </div>
                                <field name="occupation_id"/>
                                <field name="reference_id" string="Reffering Doctor"/>
                                <field name="is_patient" invisible="1"/>
                            </group>
                            <!--<field name="payment_ids" invisible="1"/>-->
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="res_partner_patient_filter" model="ir.ui.view">
            <field name="name">res.partner.patient.search</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <search string="Patient">
                    <field name="name" string="Patient"
                           filter_domain="['|', '|', '|',('email','ilike',self),('name','ilike',self),('file_number','ilike',self),('mobile','ilike',self)]"/>
                </search>
            </field>
        </record>

        <record id="action_patient_res_partner" model="ir.actions.act_window">
            <field name="name">Patient</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('is_patient', '=', True)]</field>
            <field name="context">{'default_is_patient': True}</field>
            <field name="search_view_id" ref="res_partner_patient_filter"/>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'kanban', 'view_id': ref('patient_res_partner_kanban')}),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('patient_res_partner_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('patient_res_partner_form')})]"/>
        </record>

        <menuitem id="patient_main_menu" name="Patient"  sequence="1" groups="base.group_user"/>
        <!--<menuitem id="menu_board_root" name="Dashboards" sequence="305" web_icon="base,static/description/board.png"-->
                  <!--groups="base.group_user"/>-->

        <record id="patient_res_partner_report_view" model="ir.ui.view">
            <field name="name">patient.res.partner.report.view</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <tree string="Patient" create="0" edit="0" delete="0">
                    <field name="name"/>
                    <field name="gender"/>
                    <field name="birth_date"/>
                    <field name="age"/>
                    <field name="mobile"/>
                    <field name="email"/>
                </tree>
            </field>
        </record>

        <record id="action_patient_report_view" model="ir.actions.act_window">
            <field name="name">Patients</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree</field>
            <field name="domain">[('is_patient', '=', True)]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('patient_res_partner_report_view')})]"/>
        </record>

        <menuitem name="Patient" id="patient_dashboard" parent="doctor.patient_main_menu"
                  action="action_patient_res_partner" sequence="1" groups="base.group_user"/>
    </data>
</odoo>